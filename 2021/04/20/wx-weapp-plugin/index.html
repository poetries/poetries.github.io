<!DOCTYPE html>


  <html class="dark page-post">


<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>小程序插件总结 | 前端进阶之旅</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="小程序,">
  

  <meta name="description" content="一、小程序插件功能介绍 插件的开发和使用自小程序基础库版本 1.9.6 开始支持   插件是对一组 js 接口、自定义组件或页面的封装，用于嵌入到小程序中使用 插件不能独立运行，必须嵌入在其他小程序中才能被用户使用 第三方小程序在使用插件时，也无法看到插件的代码。因此，插件适合用来封装自己的功能或服务，提供给第三方小程序进行展示和使用 会受到一些限制，如一些 API 无法调用或功能受限。还有个别特">
<meta name="keywords" content="小程序">
<meta property="og:type" content="article">
<meta property="og:title" content="小程序插件总结">
<meta property="og:url" content="http://blog.poetries.top/2021/04/20/wx-weapp-plugin/index.html">
<meta property="og:site_name" content="前端进阶之旅">
<meta property="og:description" content="一、小程序插件功能介绍 插件的开发和使用自小程序基础库版本 1.9.6 开始支持   插件是对一组 js 接口、自定义组件或页面的封装，用于嵌入到小程序中使用 插件不能独立运行，必须嵌入在其他小程序中才能被用户使用 第三方小程序在使用插件时，也无法看到插件的代码。因此，插件适合用来封装自己的功能或服务，提供给第三方小程序进行展示和使用 会受到一些限制，如一些 API 无法调用或功能受限。还有个别特">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://blog.poetries.top/img/static/images/20210419092828.png">
<meta property="og:image" content="https://blog.poetries.top/img/static/images/20210419093822.png">
<meta property="og:image" content="https://blog.poetries.top/img/static/images/20210416164731.png">
<meta property="og:image" content="https://blog.poetries.top/img/static/images/20210419141729.png">
<meta property="og:image" content="https://blog.poetries.top/img/static/images/20210419141948.png">
<meta property="og:updated_time" content="2025-03-30T13:54:29.514Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小程序插件总结">
<meta name="twitter:description" content="一、小程序插件功能介绍 插件的开发和使用自小程序基础库版本 1.9.6 开始支持   插件是对一组 js 接口、自定义组件或页面的封装，用于嵌入到小程序中使用 插件不能独立运行，必须嵌入在其他小程序中才能被用户使用 第三方小程序在使用插件时，也无法看到插件的代码。因此，插件适合用来封装自己的功能或服务，提供给第三方小程序进行展示和使用 会受到一些限制，如一些 API 无法调用或功能受限。还有个别特">
<meta name="twitter:image" content="https://blog.poetries.top/img/static/images/20210419092828.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">
<link href="/css/other.css?v=c114cbeddx" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?5081f3afc8d94338e79d319c8b632b31";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  <!-- 聊天系统 -->
  
    
   <link type="text/css" rel="stylesheet" href="/renxi/default.css">
   <style>
      #modal {
        position: static !important;
      }
      .filter {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background: #fe5757;
        animation: colorChange 30s ease-in-out infinite;
        animation-fill-mode: both;
        mix-blend-mode: overlay;
      }
  
      @keyframes colorChange {
        0%, 100% {
            opacity: 0;
        }
        50% {
            opacity: .9;
        }
      }
   </style>
</head>
</html>
<body>
  
  
    <span id="toolbox-mobile" class="toolbox-mobile">导航</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">导航</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/categories/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tags/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录<i class="iconfont toc-title" style="display:inline-block;color:#87998d;width:20px;height:20px;">&#xf004b;</i></strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、小程序插件功能介绍"><span class="toc-text">一、小程序插件功能介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、创建插件项目"><span class="toc-text">二、创建插件项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-插件目录结构"><span class="toc-text">2.1 插件目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-插件配置文件"><span class="toc-text">2.2 插件配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-插件预览、上传和发布"><span class="toc-text">2.3 插件预览、上传和发布</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、使用插件"><span class="toc-text">三、使用插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、插件的一些限制"><span class="toc-text">四、插件的一些限制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-调用-API-的限制"><span class="toc-text">4.1 调用 API 的限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-使用组件的限制"><span class="toc-text">4.2 使用组件的限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-注意事项"><span class="toc-text">4.3 注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、插件功能页"><span class="toc-text">五、插件功能页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-插件功能页"><span class="toc-text">5.1 插件功能页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-跳转到功能页"><span class="toc-text">5.2 跳转到功能页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-小程序部分功能页"><span class="toc-text">5.4 小程序部分功能页</span></a></li></ol></li></ol>
  </div>
  




<div class="content content-post CENTER">
   <!-- canvas 彩带 -->
<canvas id="evanyou" width="1302" height="678" style="position: fixed;width: 100%;height: 100%;top: 0;left:0;z-index:-1;"></canvas>

<div class="qrcode_container">
  <div class="tencent_code">
    <h4>关注作者公众号</h4> 
    <p>和万千小伙伴一起学习</p> 
    <img src="https://interview.poetries.top/qrcode.jpg" alt="公众号：前端进价之旅">
  </div> 
</div>

<article id="post-wx-weapp-plugin" class="article article-type-post" itemprop="blogPost">
  <header class="article-header" style="position:relative;">
    <h1 class="post-title">小程序插件总结</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2021.04.20</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Poetry</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Front-End/">Front-End</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
       
          <span class="post-count">
            <i class="fa fa-file-word-o"></i>&nbsp
            <span>字数统计 4.7k字</span>
          </span>

          <span class="post-count">
            <i class="fa fa-columns"></i>&nbsp
            <span>阅读时长 17分</span>
          </span>
      
      
    </div>

    <i class="iconfont" id="toc-eye" style="display:inline-block;color:#b36619;position:absolute;top:20px;right:-11px;cursor:pointer;
    font-size: 24px;">&#xe61c;</i>

  </header>

  <div class="article-content">
    
      <div id="container">
        <h2 id="一、小程序插件功能介绍"><a href="#一、小程序插件功能介绍" class="headerlink" title="一、小程序插件功能介绍"></a>一、小程序插件功能介绍</h2><blockquote>
<p>插件的开发和使用自小程序基础库版本 <code>1.9.6</code> 开始支持</p>
</blockquote>
<ul>
<li>插件是对一组 js 接口、自定义组件或页面的封装，用于嵌入到小程序中使用</li>
<li>插件不能独立运行，必须嵌入在其他小程序中才能被用户使用</li>
<li>第三方小程序在使用插件时，也无法看到插件的代码。因此，插件适合用来封装自己的功能或服务，提供给第三方小程序进行展示和使用</li>
<li>会受到一些限制，如一些 API 无法调用或功能受限。还有个别特殊的接口，虽然插件不能直接调用，但可以使用 插件功能页 来间接实现</li>
<li>框架会对小程序和小程序使用的每个插件进行数据安全保护，保证它们之间不能窃取其他任何一方的数据（除非数据被主动传递给另一方）。</li>
</ul>
<blockquote>
<p>插件，是可被添加到小程序内直接使用的功能组件。开发者可以像开发小程序一样开发一个插件，供其他小程序使用。同时，小程序开发者可直接在小程序内使用插件，无需重复开发，为用户提供更丰富的服务</p>
</blockquote>
<p>插件可以是</p>
<ul>
<li>提供查询快递信息的服务</li>
<li>提供查询天气的服务</li>
<li>提供打车（滴滴）的服务 - 可以使用滴滴提供的组件，直接嵌入自己的小程序，实现打车功能）</li>
<li>提供外卖（美团外卖）的服务 - 例如每个餐厅需要的小程序风格都不一样，但他都需要外卖功能，那这时就可以给餐厅都定制一个小程序，在外卖部分的功能可以直接使用美团外卖提供的外卖插件（*后面发现插件居然不能微信支付）</li>
</ul>
<blockquote>
<p>除了可以做这些方面还有很多很多，但小程序插件目前限制了开放范围及服务类目（<a href="https://developers.weixin.qq.com/miniprogram/introduction/plugin.html#%E5%BC%80%E6%94%BE%E8%8C%83%E5%9B%B4%E5%8F%8A%E6%9C%8D%E5%8A%A1%E7%B1%BB%E7%9B%AE" target="_blank" rel="noopener">开放类目</a>）</p>
</blockquote>
<p><strong>开放范围</strong>：企业、媒体、政府及其他组织主体</p>
<p>开发者可选择当前小程序帐号已选类目中的一个，作为插件的服务类目。以下为当前已开放的插件服务类目，将逐步开放更多类目。</p>
<table>
<thead>
<tr>
<th>一级类目</th>
<th>二级类目</th>
<th>特殊说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>快递业与邮政</td>
<td>所有二级类目</td>
<td></td>
</tr>
<tr>
<td>医疗</td>
<td>就医服务、互联网医院</td>
<td>仅医疗类小程序可使用</td>
</tr>
<tr>
<td>政务民生</td>
<td>所有二级类目</td>
<td></td>
</tr>
<tr>
<td>金融业</td>
<td>征信业务</td>
<td></td>
</tr>
<tr>
<td>出行与交通</td>
<td>所有二级类目</td>
<td></td>
</tr>
<tr>
<td>生活服务</td>
<td>票务、生活缴费</td>
<td></td>
</tr>
<tr>
<td>IT科技</td>
<td>所有二级类目</td>
<td></td>
</tr>
<tr>
<td>餐饮</td>
<td>点评与推荐、菜谱、餐厅排队、点餐平台、外卖平台</td>
<td></td>
</tr>
<tr>
<td>旅游</td>
<td>所有二级类目</td>
<td></td>
</tr>
<tr>
<td>文娱</td>
<td>视频、FM/电台、音乐、有声读物、动漫</td>
<td></td>
</tr>
<tr>
<td>工具</td>
<td>记账、投票、日历、天气、备忘录、办公、字典、计算类、报价/比价、发票查询、企业管理</td>
<td></td>
</tr>
<tr>
<td>电商平台</td>
<td>电商平台</td>
<td></td>
</tr>
<tr>
<td>商业服务</td>
<td>招聘/求职</td>
<td></td>
</tr>
<tr>
<td>汽车</td>
<td>所有二级类目</td>
</tr>
</tbody>
</table>
<p><strong>开发小程序插件的流程</strong></p>
<ol>
<li>开通入口：<code>小程序管理后台-小程序插件</code></li>
<li>开通插件功能 条件：企业、媒体、政府及其他组织主体的小程序，个人小程序不行 个数：一个小程序只能开通一个插件</li>
<li>填写开发信息并开发 限制：填写了小程序插件基本信息和头像就不能修改</li>
<li>提交审核、发布 限制：在开发类目内才能提交 官方文档说“插件发布后才可以被其他小程序搜索并添加”，但实际上不是，没有发布的也可以搜索到和添加</li>
</ol>
<h2 id="二、创建插件项目"><a href="#二、创建插件项目" class="headerlink" title="二、创建插件项目"></a>二、创建插件项目</h2><p>小程序的 AppID 可以创建小程序插件项目，插件是独立于小程序之外的，但是 AppID 是公用的，所以<code>不要使用原有的小程序项目进行插件开发</code>。 在创建项目页面，选择一个空文件夹作为项目路径，可以选择创建小程序插件快速启动模板</p>
<blockquote>
<p>没有插件appId的，我们需要去申请一个，用来开发插件</p>
</blockquote>
<p><img src="https://blog.poetries.top/img/static/images/20210419092828.png" alt></p>
<ul>
<li><code>miniprogram</code> 目录：放置一个小程序，用于调试插件。<ul>
<li>文件夹是一个普通小程序项目，用来编写小程序插件的使用 Demo，上传插件代码时这个 Demo 会一起上传，并作为小程序插件的发布的审核依据.</li>
</ul>
</li>
<li><code>plugin</code> 文件就是小程序插件项目，用来编写小程序插件的代码。</li>
<li><code>project.config.json</code> 需要关注 <code>compileType</code> 字段，<code>compileType == &#39;plugin&#39;</code> 时才能正常的使用插件项目。详情</li>
<li><code>doc 目录</code>：插件文档必须放置在插件项目根目录中的 doc 目录下<ul>
<li>插件文档的入口文件是 <code>doc/README.md</code>，在 <code>README.md</code> 中引用到的图片资源不能是网络图片，且必须放在这个目录下。</li>
<li>文档中的链接只能链接到<ul>
<li>微信开发者社区（developers.weixin.qq.com）</li>
<li>微信公众平台（mp.weixin.qq.com）</li>
<li>GitHub（github.com）</li>
</ul>
</li>
<li>编辑 <code>README.md</code> 之后，可以在开发者工具左侧资源管理器的文件栏中右键单击<code>README.md</code>，并选择上传文档。发布上传文档后，文档不会立刻发布。此时可以使用帐号和密码登录 管理后台 ，在 <code>小程序插件 &gt; 基本设置</code> 中预览、发布插件文档</li>
<li>插件文档<code>总大小不能大于 2M</code>，超过时上传将返回错误码 80051<br><img src="https://blog.poetries.top/img/static/images/20210419093822.png" alt></li>
</ul>
</li>
</ul>
<h3 id="2-1-插件目录结构"><a href="#2-1-插件目录结构" class="headerlink" title="2.1 插件目录结构"></a>2.1 插件目录结构</h3><p>一个插件可以包含若干个自定义组件、页面，和一组 js 接口。插件的目录内容如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">plugin</span><br><span class="line">├── components</span><br><span class="line">│   ├── hello-component.js   <span class="comment">// 插件提供的自定义组件文件夹， 中自定义组件可以有多个</span></span><br><span class="line">│   ├── hello-component.json</span><br><span class="line">│   ├── hello-component.wxml</span><br><span class="line">│   └── hello-component.wxss</span><br><span class="line">├── pages</span><br><span class="line">│   ├── hello-page.js        <span class="comment">// 插件提供的页面（可以有多个，自小程序基础库版本 2.1.0 开始支持）</span></span><br><span class="line">│   ├── hello-page.json</span><br><span class="line">│   ├── hello-page.wxml</span><br><span class="line">│   └── hello-page.wxss</span><br><span class="line">├── index.js                 <span class="comment">//  插件入口文件，可以在这里 export 一些 js 接口，供插件使用者使用</span></span><br><span class="line">└── plugin.json              <span class="comment">//  插件的配置文件，主要说明有哪些自定义组件可以供插件外部调用，并标识哪个js文件是插件的js接口文件，默认的配置形式如下：</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"publicComponents"</span>: &#123;</span><br><span class="line">    <span class="string">"list"</span>: <span class="string">"components/list/list"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-插件配置文件"><a href="#2-2-插件配置文件" class="headerlink" title="2.2 插件配置文件"></a>2.2 插件配置文件</h3><blockquote>
<p>提供给使用者小程序使用的自定义组件必须在配置文件的 publicComponents 段中列出</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"publicComponents"</span>: &#123;</span><br><span class="line">    <span class="attr">"hello-component"</span>: <span class="string">"components/hello-component"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"pages"</span>: &#123;</span><br><span class="line">    <span class="attr">"hello-page"</span>: <span class="string">"pages/hello-page"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个配置文件将向使用者小程序开放一个自定义组件 <code>hello-component</code>，一个页面 <code>hello-page</code> 和 <code>index.js</code> 下导出的所有 js 接口。</p>
<h3 id="2-3-插件预览、上传和发布"><a href="#2-3-插件预览、上传和发布" class="headerlink" title="2.3 插件预览、上传和发布"></a>2.3 插件预览、上传和发布</h3><ul>
<li>插件可以像小程序一样预览和上传，但<code>插件没有体验版</code>。</li>
<li>插件会同时有多个线上版本，由使用插件的小程序决定具体使用的版本号。</li>
<li>手机预览和提审插件时，会使用一个特殊的小程序来套用项目中 miniprogram 文件夹下的小程序，从而预览插件。</li>
</ul>
<p><strong>在开发版小程序中测试</strong></p>
<ul>
<li>通常情况下，可以将 <code>miniprogram</code> 下的代码当做使用插件的小程序代码，来进行插件的调试和测试</li>
<li>但有时，<code>需要将插件的代码放在实际运行的小程序中进行调试、测试</code>。此时，<code>可以使用开发版的小程序直接引用开发版插件</code>。方法如下：</li>
</ul>
<ol>
<li>在开发者工具的插件项目中上传插件，此时，在上传成功的通知信息中将包含这次上传获得的插件开发版 ID （一个英文、数字组成的随机字符串）；</li>
<li>点击开发者工具右下角的通知按钮，可以打开通知栏，看到<code>新生成的 ID</code> ；</li>
<li>在需要使用开发版本插件的小程序项目中，将插件 <code>version</code> 设置为 <code>&quot;version&quot;: &quot;dev-[开发版 ID]&quot;</code> 的形式，如 <code>&quot;version&quot;: &quot;dev-abcdef0123456789abcdef0123456789&quot;</code> 即可。</li>
</ol>
<blockquote>
<p>如果开发版小程序引用了开发版插件，此时这个小程序就不能上传发布了。必须要将插件版本设为正式版本之后，小程序才可以正常上传、发布</p>
</blockquote>
<p><strong>注意事项：</strong></p>
<ul>
<li><code>每次上传插件所生成的 ID 不一定相同</code>，即使是同一个插件和同一个开发者，<code>多次上传也可能会改变 ID</code>；</li>
<li>每个开发者在每个插件中只会同时存在一个有效的开发版插件，即只有最新上传的开发版 ID 有效（使用旧的 ID 会提示失效）；</li>
<li>同一个插件不同开发者上传的开发版互不影响，可以同时有效；</li>
<li>开发版插件没有时间限制，长期有效。</li>
</ul>
<h2 id="三、使用插件"><a href="#三、使用插件" class="headerlink" title="三、使用插件"></a>三、使用插件</h2><ul>
<li><strong>添加插件</strong><ul>
<li>在使用插件前，首先要在小程序管理后台的<code>“设置-第三方服务-插件管理”</code>中添加插件。开发者可登录小程序管理后台，通过 appid 查找插件并添加。如果插件无需申请，添加后可直接使用；否则需要申请并等待插件开发者通过后，方可在小程序中使用相应的插件。<br><img src="https://blog.poetries.top/img/static/images/20210416164731.png" alt></li>
</ul>
</li>
<li><p><strong>引入插件代码包</strong></p>
<ul>
<li><p>使用插件前，使用者要在 <code>app.json</code> 中声明需要使用的插件，例如</p>
<ul>
<li><p><strong>在主包中使用插件</strong></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"plugins"</span>: &#123;</span><br><span class="line">    <span class="attr">"myPlugin"</span>: &#123;</span><br><span class="line">      <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">      <span class="attr">"provider"</span>: <span class="string">"wxidxxxxxxxxxxxxxxxx"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>plugins</code> 定义段中可以包含多个插件声明，每个插件声明以一个使用者自定义的插件引用名作为标识，并指明插件的 appid 和需要使用的版本号。其中，引用名（如上例中的 myPlugin）由使用者自定义，无需和插件开发者保持一致或与开发者协调。在后续的插件使用中，该引用名将被用于表示该插件</li>
</ul>
</li>
<li><p><strong>在分包内引入插件代码包</strong></p>
<ul>
<li><p>如果插件只在一个分包内用到，可以将插件仅放在这个分包内，例如：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"subpackages"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"root"</span>: <span class="string">"packageA"</span>,</span><br><span class="line">      <span class="attr">"pages"</span>: [</span><br><span class="line">        <span class="string">"pages/cat"</span>,</span><br><span class="line">        <span class="string">"pages/dog"</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"plugins"</span>: &#123;</span><br><span class="line">        <span class="attr">"myPlugin"</span>: &#123;</span><br><span class="line">          <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">          <span class="attr">"provider"</span>: <span class="string">"wxidxxxxxxxxxxxxxxxx"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在分包内使用插件有如下限制：</p>
<ul>
<li>仅能在这个分包内使用该插件</li>
<li>同一个插件不能被多个分包同时引用</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>使用插件方式</strong></p>
<blockquote>
<p>使用插件时，插件的代码对于使用者来说是不可见的。阅读由插件开发者提供的插件开发文档，通过文档来明确插件提供的自定义组件、页面名称及提供的 js 接口规范等。</p>
</blockquote>
<ul>
<li><p><strong>使用插件提供的自定义组件</strong></p>
<ul>
<li>使用插件提供的自定义组件，和 使用普通自定义组件 的方式相仿。在 json 文件定义需要引入的自定义组件时，使用 <code>plugin:// 协议指明插件的引用名和自定义组件名</code>，例如</li>
<li><p>插件跳转到自身页面时， url 应设置为这样的形式：<code>plugin-private://PLUGIN_APPID/PATH/TO/PAGE</code> 。需要跳转到其他插件时，也可以这样设置 url 。</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"usingComponents"</span>: &#123;</span><br><span class="line">    <span class="attr">"hello-component"</span>: <span class="string">"plugin://myPlugin/hello-component"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>出于对插件的保护，插件提供的自定义组件在使用上有一定的限制：</p>
<ul>
<li>默认情况下，页面中的 <code>this.selectComponent</code> 接口无法获得插件的自定义组件实例对象；</li>
<li><code>wx.createSelectorQuery</code> 等接口的 &gt;&gt;&gt; 选择器无法选入插件内部</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>使用插件提供的页面</strong></p>
<ul>
<li>需要跳转到插件页面时，url 使用 <code>plugin:// 前缀</code>，形如 <code>plugin://PLUGIN_NAME/PLUGIN_PAGE</code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">"plugin://myPlugin/hello-page"</span>&gt;</span></span><br><span class="line">  Go to pages/hello-page!</span><br><span class="line"><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>js 接口</strong></p>
<ul>
<li><p>使用插件的 js 接口时，可以使用 <code>requirePlugin</code> 方法。例如，插件提供一个名为 hello 的方法和一个名为 world 的变量，则可以像下面这样调用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myPluginInterface = requirePlugin(<span class="string">'myPlugin'</span>);</span><br><span class="line"></span><br><span class="line">myPluginInterface.hello();</span><br><span class="line"><span class="keyword">var</span> myWorld = myPluginInterface.world;</span><br></pre></td></tr></table></figure>
</li>
<li><p>基础库 <code>2.14.0</code> 起，也可以通过<code>插件的 AppID 来获取接口</code>，如：<code>var myPluginInterface = requirePlugin(&#39;wxidxxxxxxxxxxxxxxxx&#39;)</code></p>
</li>
</ul>
</li>
<li><p><strong>使用插件的小程序可以导出内容到插件中共享</strong></p>
<ul>
<li>在声明使用插件时，可以通过 <code>export</code> 字段来指定一个文件<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"myPlugin": &#123;</span><br><span class="line">  "version": "dev",</span><br><span class="line">  "provider": "",</span><br><span class="line">  "export": "exportToPlugin.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="https://blog.poetries.top/img/static/images/20210419141729.png" alt></p>
<ul>
<li>导出的内容可以被这个插件用全局函数获得。例如，在上面的文件中，使用插件的小程序做了如下导出：<br><img src="https://blog.poetries.top/img/static/images/20210419141948.png" alt></li>
</ul>
</li>
</ul>
<p><strong>为插件提供小程序自定义组件</strong></p>
<blockquote>
<p>在插件中可以将一部分区域交给使用的小程序来渲染</p>
</blockquote>
<p>给插件名为 <code>plugin-index</code> 的页面中的抽象节点 <code>mp-view</code> 指定小程序的自定义组件 <code>components/comp-from-miniprogram</code> 作为实现的话</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"myPlugin"</span>: &#123;</span><br><span class="line">    <span class="attr">"provider"</span>: <span class="string">"wxAPPID"</span>,</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">    <span class="attr">"genericsImplementation"</span>: &#123;</span><br><span class="line">      <span class="attr">"plugin-index"</span>: &#123;</span><br><span class="line">        <span class="attr">"mp-view"</span>: <span class="string">"components/comp-from-miniprogram"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- miniprogram/page/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin-view</span> <span class="attr">generic:mp-view</span>=<span class="string">"comp-from-miniprogram"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="四、插件的一些限制"><a href="#四、插件的一些限制" class="headerlink" title="四、插件的一些限制"></a>四、插件的一些限制</h2><h3 id="4-1-调用-API-的限制"><a href="#4-1-调用-API-的限制" class="headerlink" title="4.1 调用 API 的限制"></a>4.1 调用 API 的限制</h3><ul>
<li>插件的请求域名列表与小程序相互独立；</li>
<li>一些 API 不允许插件调用（这些函数不存在于 wx 对象下）。</li>
<li>有些接口虽然在插件中不能使用，但可以通过插件功能页来达到目的，请参考插件功能页。</li>
</ul>
<p><strong>小程序插件中不能使用API</strong></p>
<table>
<thead>
<tr>
<th>wx.login</th>
<th>登录</th>
</tr>
</thead>
<tbody>
<tr>
<td>wx.getUserInfo</td>
<td>获取用户信息</td>
</tr>
<tr>
<td>wx.chooseAddress</td>
<td>获取用户收货地址</td>
</tr>
<tr>
<td>wx.requestPayment</td>
<td>【发起微信支付】</td>
</tr>
<tr>
<td>wx.addCard</td>
<td>添加卡券</td>
</tr>
<tr>
<td>wx.openCard</td>
<td>打开卡券</td>
</tr>
<tr>
<td>wx.saveFile</td>
<td>保存文件</td>
</tr>
<tr>
<td>wx.getSavedFileList</td>
<td>获取已保存的文件列表</td>
</tr>
<tr>
<td>wx.getSavedFileInfo</td>
<td>获取已保存的文件信息</td>
</tr>
<tr>
<td>wx.removeSavedFile</td>
<td>删除已保存的文件信息</td>
</tr>
<tr>
<td>wx.openDocument</td>
<td>打开文件</td>
</tr>
<tr>
<td>wx.getStorageInfo</td>
<td>获取本地缓存的相关信息</td>
</tr>
<tr>
<td>wx.getStorageInfoSync</td>
<td>获取本地缓存的相关信息</td>
</tr>
<tr>
<td>wx.clearStorage</td>
<td>清理本地数据缓存</td>
</tr>
<tr>
<td>wx.clearStorageSync</td>
<td>清理本地数据缓存</td>
</tr>
<tr>
<td>wx.setNavigationBarTitle</td>
<td>设置当前页面标题</td>
</tr>
<tr>
<td>wx.showNavigationBarLoading</td>
<td>显示导航条加载动画</td>
</tr>
<tr>
<td>wx.hideNavigationBarLoading</td>
<td>隐藏导航条加载动画</td>
</tr>
<tr>
<td>wx.navigateTo</td>
<td>新窗口打开页面</td>
</tr>
<tr>
<td>wx.redirectTo</td>
<td>原窗口打开页面</td>
</tr>
<tr>
<td>wx.switchTab</td>
<td>切换到 tabbar 页面</td>
</tr>
<tr>
<td>wx.navigateBack</td>
<td>退回上一个页面</td>
</tr>
<tr>
<td>wx.stopPullDownRefresh</td>
<td>停止下拉刷新动画</td>
</tr>
</tbody>
</table>
<h3 id="4-2-使用组件的限制"><a href="#4-2-使用组件的限制" class="headerlink" title="4.2 使用组件的限制"></a>4.2 使用组件的限制</h3><p>在插件开发中，以下组件不能在插件页面中使用：</p>
<ul>
<li>开放能力（open-type）为以下之一的 button： contact（打开客服会话） getPhoneNumber（获取用户手机号） getUserInfo（获取用户信息）</li>
<li>open-data</li>
<li>web-view 以下组件的使用对基础库版本有要求</li>
<li>navigator 需要基础库版本 2.1.0</li>
<li>live-player 和 live-pusher 需要基础库版本 2.3.0</li>
</ul>
<h3 id="4-3-注意事项"><a href="#4-3-注意事项" class="headerlink" title="4.3 注意事项"></a>4.3 注意事项</h3><ul>
<li><strong>插件间互相调用</strong><ul>
<li>插件不能直接引用其他插件。但如果小程序引用了多个插件，插件之间是可以互相调用的。</li>
<li>一个插件调用另一个插件的方法，与插件调用自身的方法类似。可以使用 <code>plugin-private://APPID 访问插件的自定义组件、页面</code>（暂不能使用 plugin:// ）。</li>
<li>对于 js 接口，可使用 <code>requirePlugin</code> ，但目前尚不能在文件一开头就使用 <code>requirePlugin</code> ，因为被依赖的插件可能还没有初始化，请考虑在更晚的时机调用 <code>requirePlugin</code> ，如接口被实际调用时、组件 attached 时</li>
</ul>
</li>
</ul>
<h2 id="五、插件功能页"><a href="#五、插件功能页" class="headerlink" title="五、插件功能页"></a>五、插件功能页</h2><h3 id="5-1-插件功能页"><a href="#5-1-插件功能页" class="headerlink" title="5.1 插件功能页"></a>5.1 插件功能页</h3><p>插件功能页从小程序基础库版本 <code>2.1.0</code> 开始支持。</p>
<blockquote>
<p>某些接口不能在插件中直接调用（如 <code>wx.login</code>），但插件开发者可以使用插件功能页的方式来实现功能。目前，插件功能页包括</p>
</blockquote>
<ul>
<li>获取用户信息，包括 <code>openid</code>和昵称等（相当于 <code>wx.login</code> 和 <code>wx.getUserInfo</code>的功能），详见用户信息功能页</li>
<li>支付（相当于 <code>wx.requestPayment</code>），详见支付功能页；</li>
<li>获取收货地址（相当于 <code>wx.chooseAddress</code>），详见收货地址功能页。</li>
</ul>
<blockquote>
<p>要使用插件功能页，需要先激活功能页特性，配置对应的功能页函数，再使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/functional-page-navigator.html" target="_blank" rel="noopener">functional-page-navigator</a> 组件跳转到插件功能页，从而实现对应的功能</p>
</blockquote>
<ul>
<li>激活功能页特性<ul>
<li>要在插件中调用插件功能页，需要先激活插件所有者小程序的功能页特性</li>
<li><code>app.json</code> 文件中添加 <code>functionalPages</code> 定义段<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"functionalPages"</span>: &#123;</span><br><span class="line">    <span class="attr">"independent"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="5-2-跳转到功能页"><a href="#5-2-跳转到功能页" class="headerlink" title="5.2 跳转到功能页"></a>5.2 跳转到功能页</h3><blockquote>
<p>功能页不能使用 <code>wx.navigateTo</code> 来进行跳转，而是需要一个名为 <code>functional-page-navigator</code> 的组件。以获取用户信息为例，可以在插件中放置如下的 <code>functional-page-navigator</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">functional-page-navigator</span> <span class="attr">name</span>=<span class="string">"loginAndGetUserInfo"</span> <span class="attr">args</span>=<span class="string">""</span> <span class="attr">version</span>=<span class="string">"develop"</span> <span class="attr">bind:success</span>=<span class="string">"loginSuccess"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>登录到插件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">functional-page-navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>用户在点击这个 <code>navigator</code> 时，会自动跳转到插件所有者小程序的对应功能页。功能页会提示用户进行登录或其他相应的操作。操作结果会以组件事件的方式返回。</li>
<li>从小程序基础库版本 2.4.0 开始，支持插件所有者小程序跳转到自己的功能页。在基础库版本低于 2.4.0 时，点击跳转到自己的功能页的 <code>functional-page-navigator</code> 将没有任何反应</li>
</ul>
<blockquote>
<p>注意：<code>functional-page-navigator</code> 的 <code>version=develop</code> 仅用于调试，因此在插件提审前，需要：</p>
</blockquote>
<ul>
<li>确保已发布设置了 <code>&quot;functionalPages&quot;: true</code> 的插件所有者小程序；</li>
<li>确保所有的 <code>functional-page-navigator</code> 组件属性设置为 <code>version=&quot;release&quot;</code></li>
</ul>
<h3 id="5-4-小程序部分功能页"><a href="#5-4-小程序部分功能页" class="headerlink" title="5.4 小程序部分功能页"></a>5.4 小程序部分功能页</h3><p><strong>1. 用户信息功能页</strong></p>
<blockquote>
<p>用户信息功能页用于帮助插件获取用户信息，包括 openid 和昵称等，相当于 wx.login 和 wx.getUserInfo 的功能。</p>
</blockquote>
<p>此外，自基础库版本 2.3.1 起，用户在这个功能页中授权之后，插件就可以直接调用 <code>wx.login 和 wx.getUserInfo</code> 。无需再次进入功能页获取用户信息。自基础库版本 2.6.3 起，可以使用 <code>wx.getSetting</code> 来查询用户是否授权过</p>
<p><strong>2. 支付功能页</strong></p>
<ul>
<li>支付功能页用于帮助插件完成支付，相当于 <code>wx.requestPayment</code> 的功能。</li>
<li>需要注意的是：插件使用支付功能，需要进行额外的权限申请，申请位置位于管理后台的<code>“小程序插件 -&gt; 基本设置 -&gt; 支付能力”</code>设置项中。另外，无论是否通过申请，主体为个人小程序在使用插件时，都无法正常使用插件里的支付功能。</li>
</ul>
<p><strong>3. 收货地址功能页</strong></p>
<p>收货地址功能页用于展示用户的收货地址列表，用户可以选择其中的收货地址。自基础库版本 2.4.0 开始支持。</p>

      </div>
    
  </div>

</article>

<!-- <button class="assist-btn2 circle" id="assist_btn2" title="点亮屏幕" style="left: 27px; top: 152px;">
  <i class="iconfont" style="display:inline-block;color:red;width:20px;height:20px;">&#xe61d;</i>
</button>
<button class="assist-btn1 circle" id="assist_btn1" title="关闭屏幕亮度" style="left: 27px; top: 152px;">
  <i class="iconfont toc-title" style="display:inline-block;color:red;width:20px;height:20px;">&#xe61d;</i>
</button> -->


<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>	

<script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script>
<script>
  function getCookie(key) {
    if (document.cookie.length > 0) {
      var start = document.cookie.indexOf(key + "=");
      if (start !== -1) {
        start = start + key.length + 1;
        var end = document.cookie.indexOf(";", start);
        if (end === -1) end = document.cookie.length;
        return unescape(document.cookie.substring(start, end));
      }
    }
    return "";
  }
  const feToken = getCookie('fe-token');
  const btw = new BTWPlugin();
  console.log('ft', feToken)
  if(!feToken) {
    btw.init({
      id: "container",
      blogId: "22699-1592137983091-414",
      name: "前端进阶之旅",
      qrcode: "https://poetries1.gitee.io/img-repo/2020/06/qrcode.jpg",
      keyword: "3a3b3c",
    });
  }
</script>

<script type="text/javascript">

// white theme
var body = {color: "#555", background: "#000"};
var a_tag = {color: "#222"};
var header = { background: "#222"};
var logo_line_i = {background: "#222"};
// var post_code = {background: "#eee", color: "#222"};

function switch_theme() {
 $("body").css(body);
 $("a:not('.links-of-author-item a, .site-state-item a, .site-state-posts a, .feed-link a, .motion-element a, .post-tags a, .show-commit-cls a, #donate_board a')").css(a_tag);
 $(".header, .footer").css(header);
 $(".logo-line-before i, .logo-line-after i").css(logo_line_i);
 //$(".post code").css(post_code);
 $("#idhyt-surprise-ball #idhyt-surprise-ball-animation .drag").css(a_tag);
 $(".post-title-link, .posts-expand .post-meta, .post-comments-count, .disqus-comment-count, .post-category a, .post-nav-next a, .post-nav-item a").css(a_tag);
 
 // $("code").css({color: '#c5c8c6', background: '#1d1f21'});
 //$("#assist_btn1").hide(1500);
}

$(function () {
$("#assist_btn2").css("display","none");
 $("#assist_btn1").click(function() {
     switch_theme();
$("div#toc.toc-article").css({
 "background":"#eaeaea",
 "opacity":1
});
$(".toc-article ol").show();
$("#toc.toc-article .toc-title").css("color","#a98602");
$("#assist_btn1").css("display","none");
$("#assist_btn2").css("display","block");
 });
$("#assist_btn2").click(function() {
$("#assist_btn2").css("display","none");
$("#assist_btn1").css("display","block");
$("body").css("background","url(http://www.miaov.com/static/ie/images/news/bg.png)")
     $(".header, .footer").css("background","url(http://www.miaov.com/static/ie/images/news/bg.png)")
$(".toc-article ol").toggle(1000);
 });
});


//背景随机

var Y, O, E, L, B, C, T, z, N, S, A, I;
!function() {
var e = function() {
for (O.clearRect(0, 0, L, B), T = [{
x: 0,
y: .7 * B + C
}, {
x: 0,
y: .7 * B - C
}]; T[1].x < L + C;) t(T[0], T[1])
}, t = function(e, t) {
O.beginPath(), O.moveTo(e.x, e.y), O.lineTo(t.x, t.y);
var n = t.x + (2 * I() - .25) * C,
 r = a(t.y);
O.lineTo(n, r), O.closePath(), N -= S / -50, O.fillStyle = "#" + (127 * A(N) + 128 << 16 | 127 * A(N + S / 3) + 128 << 8 | 127 * A(N + S / 3 * 2) + 128).toString(16), O.fill(), T[0] = T[1], T[1] = {
 x: n,
 y: r
}
}, a = function n(e) {
var t = e + (2 * I() - 1.1) * C;
return t > B || t < 0 ? n(e) : t
};
Y = document.getElementById("evanyou"), O = Y.getContext("2d"), E = window.devicePixelRatio || 1, L = window.innerWidth, B = window.innerHeight, C = 90, z = Math, N = 0, S = 2 * z.PI, A = z.cos, I = z.random, Y.width = L * E, Y.height = B * E, O.scale(E, E), O.globalAlpha = .6, document.onclick = e, document.ontouchstart = e, e()
}()

   
$("#toc-eye").click(function(){
$("#toc.toc-article").toggle(1000);
});

</script>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持poetries</div>
        <ul>
        
          <li class="item">
            
              <span>微信扫一扫</span>
            
            <img src="/images/weixin.jpg" alt="">
          </li>
        
          <li class="item">
            
              <span>支付宝扫一扫</span>
            
            <img src="/images/zhifubao.jpg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2021/04/20/wx-compile-summary/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2021/05/11/fe-monitor-sys/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/categories/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tags/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '5567a2c4abb858009d96',
  clientSecret: 'b9039ec056cf5c2346b3cdb63308a28c163f91e5',
  repo: 'poetries.github.io',
  owner: 'poetries',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: location.pathname,
  admin: ['poetries'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>


  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/clicklove.js"></script>
 
  
</body>
</html>
